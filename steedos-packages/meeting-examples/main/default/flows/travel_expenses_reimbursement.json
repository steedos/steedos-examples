{ "_id": "tuY76mZssQFAW7ZDj", "name": "费用报销", "state": "enabled", "is_deleted": false, "is_valid": true, "space": "f3mDsDnqbffWBfnKe", "app": "workflow", "created": "2021-10-20T02:08:17.954Z", "modified": "2021-10-21T09:50:12.157Z", "modified_by": "61653b92aa13851dafe36e1a", "instance_style": "table", "company_id": "ojtDauFfbyp88NHGi", "current": { "_id": "QixDpXjhNqRzifKnp", "_rev": 24, "created": "2021-10-21T09:50:12.088Z", "created_by": "61653b92aa13851dafe36e1a", "start_date": "2021-10-21T09:50:12.088Z", "modified": "2021-10-21T09:50:12.088Z", "modified_by": "61653b92aa13851dafe36e1a", "form": "tuY76mZssQFAW7ZDj", "fields": [{ "type": "input", "name": "流水号", "code": "流水号", "_id": "NzRrf5ZcmQvgi9wJ5", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "date", "name": "单据日期", "code": "单据日期", "_id": "g9yHxmhATcX33nZMt", "default_value": "{now}", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "input", "name": "人员", "code": "人员", "_id": "q4YkLKxKaip3ciYvJ", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "出差人", "code": "出差人", "_id": "wj2yTYweQ9SWsCTfN", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "所属部门", "code": "所属部门", "_id": "vf4ZeqSFK8jYvbvR7", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "所属公司", "code": "所属公司", "_id": "MEKvpi465fA7EDPh2", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "input", "name": "单据状态", "code": "单据状态", "_id": "hGnvCy3bEYtnJ4ZzF", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "input", "name": "出差事由", "code": "出差事由", "_id": "CtgjCQ2pznTRdmQt4", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "付款方式", "code": "付款方式", "options": "现金\n银行", "_id": "DoSQWKuCZPdQxaifd", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "select", "name": "币种", "code": "币种", "_id": "EKhd5MLMGgHdoi7Cr", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "options": "人民币\n美元\n欧元", "default_value": "人民币" }, { "type": "number", "name": "报销金额", "code": "报销金额", "_id": "GiahqAbmYFh2e4ejE", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "收款金额", "code": "收款金额", "_id": "c8ZfhNZkFbw6kD6kf", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }, { "type": "input", "name": "发票类型", "code": "发票类型", "options": "含增值税专用发票\n火车票\n定额发票", "_id": "jWCzFcp2iLmGXbznY", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "number", "name": "票据数量", "code": "票据数量", "_id": "YfjRJJsJaoXRjeWyv", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }, { "type": "number", "name": "附件数", "code": "附件数", "_id": "SjxG5pquF69PMkDYf", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }, { "type": "input", "name": "项目", "code": "项目", "_id": "6hZobX66NzFs5orpx", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "input", "name": "采管会", "code": "采管会", "_id": "9HDaoAGiKEgjcqGPf", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "input", "name": "签报", "code": "签报", "_id": "TBg3a9RuTNmSZ5v58", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "input", "name": "总裁办公会", "code": "总裁办公会", "_id": "weB4YJfFuRXQtFNFZ", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "table", "name": "交通费用明细(需引审批单)", "code": "交通费用明细", "_id": "9TqJ6gfC56dsWcDrZ", "is_wide": true, "fields": [{ "type": "date", "name": "出发日期", "code": "交通费用明细-出发日期", "_id": "E9u4pHHEHx9q2TaLT", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "date", "name": "到达日期", "code": "交通费用明细-到达日期", "_id": "sBN52RrZcwPRDHkJx", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "出发地点", "code": "交通费用明细-出发地点", "_id": "a8urDB7WxvkQrL9Tm", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "到达地点", "code": "交通费用明细-到达地点", "_id": "XRwJ8yZ4YGftwPxtv", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "交通工具", "code": "交通费用明细-交通工具", "_id": "KqwHtcvAHSrbjr3w8", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "select", "name": "是否有本人信息", "code": "交通费用明细-是否有本人信息", "_id": "LeZNCMkoxy8KqF2Dh", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "options": "是\n否" }, { "type": "number", "name": "报销金额", "code": "交通费用明细-报销金额", "_id": "uchqMFXZFobnY4QKB", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "其中民航发展基金", "code": "交通费用明细-其中民航发展基金", "_id": "5RMzbLrAhtHez8r25", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }, { "type": "number", "name": "税率(%)", "code": "交通费用明细-税率", "_id": "oh5GXbFRAk9S7we29", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }, { "type": "number", "name": "不含税金额", "code": "交通费用明细-不含税金额", "_id": "W5mc3pffHePqpafgQ", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "旅客运输增值税税额", "code": "交通费用明细-旅客运输增值税税额", "_id": "4rPv6cSaGsooBrDn6", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }, { "type": "number", "name": "票据数量", "code": "交通费用明细-票据数量", "_id": "gHi4HGp5ydw3eW6iF", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }, { "type": "input", "name": "来源单号", "code": "交通费用明细-来源单号", "_id": "KKHkFjEyqro6TCYtE", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }], "is_required": false }, { "type": "table", "name": "其他费用明细", "code": "其他费用明细", "_id": "Lu37MeYj2MyWSm5zB", "is_wide": true, "fields": [{ "type": "input", "name": "报销项目", "code": "其他费用明细-报销项目", "_id": "hXeMF6juKQbKMxRcz", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "select", "name": "币种", "code": "其他费用明细-币种", "_id": "tqCXeFCysCmEnNxtA", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "options": "人民币\n美元\n欧元" }, { "type": "number", "name": "汇率", "code": "其他费用明细--汇率", "_id": "fa53DSWnhXihaof8P", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "报销金额", "code": "其他费用明细-报销金额", "_id": "KpFGv24iioys2zskS", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "票据数量", "code": "其他费用明细-票据数量", "_id": "WMvKWvf4quZNBJPnR", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }], "is_required": false }, { "type": "table", "name": "出差补贴明细", "code": "出差补贴明细", "_id": "5brEkDbWKcpHHr6Qe", "is_wide": true, "fields": [{ "type": "number", "name": "天数", "code": "出差补贴明细-天数", "_id": "XD5e3dfZfgL6YvXF2", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "select", "name": "补贴标准(原币)", "code": "出差补贴明细-补贴标准", "_id": "uDcrcMrcAHXH9M3Mi", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "options": "180元/天\n280元/天\n380元/天" }, { "type": "number", "name": "补贴总金额(人民币)", "code": "出差补贴明细-补贴总金额", "_id": "A8ZejDPssKH9QP7LT", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "汇率", "code": "出差补贴明细-汇率", "_id": "mfoS9Do7vkataRL5w", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }], "is_required": false }, { "type": "table", "name": "增值税专用发票明细", "code": "增值税专用发票明细", "_id": "NhFvTh3vmpQ5SGtQo", "is_wide": true, "fields": [{ "type": "input", "name": "发票号", "code": "增值税专用发票明细-发票号", "_id": "Pgy3hCoDwdMe79RKS", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "number", "name": "不含税价", "code": "增值税专用发票明细-不含税价", "_id": "HSdncCrnLKMxyGmSZ", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }, { "type": "number", "name": "税率", "code": "增值税专用发票明细-税率", "_id": "zppXfAkPx5wRJsvqF", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "税额（可手动修改）", "code": "增值税专用发票明细-税额", "_id": "YmJrLpnsWfLvSiKky", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "价税合计", "code": "增值税专用发票明细-价税合计", "_id": "XdHXxSbyGbnCtksAk", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "input", "name": "发票说明", "code": "增值税专用发票明细-发票说明", "_id": "6QEogg7JmRtcwag8e", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }], "is_required": false }, { "type": "table", "name": "部门费用分摊表", "code": "部门费用分摊表", "_id": "L39iGdPa9EeCS58nk", "is_wide": true, "fields": [{ "type": "input", "name": "预算承担部门", "code": "部门费用分摊表-预算承担部门", "_id": "gsXGS39dLYrY3CNqE", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "项目名称", "code": "部门费用分摊表-项目名称", "_id": "B8Kh8Nd8Sx7jSJ8St", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "number", "name": "报销金额（人民币）", "code": "部门费用分摊表-报销金额", "_id": "PfMp82iQCZudFJ4GZ", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "增值税税额=旅客运输增值税额+增值税专用发票税额", "code": "部门费用分摊表-增值税税额", "_id": "oqer4szk8t6hLfa7H", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "number", "name": "预算扣减额", "code": "部门费用分摊表-预算扣减额", "_id": "SZYXotWmuoYJkr5ms", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }], "is_required": false }, { "type": "table", "name": "收款明细", "code": "收款明细", "_id": "3SjNfzgHTZuYJ6dg5", "is_wide": true, "fields": [{ "type": "input", "name": "收款人", "code": "收款明细-收款人", "_id": "YkXMMkbBJu5J7mRun", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "银行账户切换", "code": "收款明细-银行账户切换", "_id": "L3k69kZNdNQai3kD4", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "input", "name": "收款银行", "code": "收款明细-收款银行", "_id": "Qdoij4C9WdocASX5C", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "input", "name": "收款账号", "code": "收款明细-收款账号", "_id": "FvvNa4b92ux2Aki8F", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false }, { "type": "number", "name": "收款金额", "code": "收款明细-收款金额", "_id": "k2pDqDFbMCRXXAPWm", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": true, "is_multiselect": false, "digits": null }, { "type": "input", "name": "附言", "code": "收款明细-附言", "_id": "7uN4y2t37ayjYkbvA", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false }, { "type": "number", "name": "已付金额", "code": "收款明细-已付金额", "_id": "tu23uDCs5rv37EE6T", "is_wide": false, "is_list_display": false, "is_searchable": false, "is_required": false, "is_multiselect": false, "digits": null }], "is_required": false }] }, "company_ids": ["ojtDauFfbyp88NHGi"], "historys": [], "instance_number_rules": [], "flows": [{ "_id": "CsePrmYFiNTHH9oim", "space": "f3mDsDnqbffWBfnKe", "form": "tuY76mZssQFAW7ZDj", "name_formula": "", "code_formula": "", "is_valid": true, "flowtype": "new", "state": "enabled", "description": "", "help_text": "", "error_message": "", "current_no": 1, "is_deleted": false, "created": "2021-10-20T02:08:18.016Z", "modified": "2021-10-21T09:50:12.101Z", "modified_by": "61653b92aa13851dafe36e1a", "name": "差旅费用报销", "app": "workflow", "company_id": "ojtDauFfbyp88NHGi", "perms": { "orgs_can_add": ["ojtDauFfbyp88NHGi"], "users_can_add": [], "_id": "T7TvcPNZTnTSv2Svx" }, "current": { "_id": "esGwAJzcKQMsydygj", "created": "2021-10-21T09:50:12.088Z", "created_by": "61653b92aa13851dafe36e1a", "steps": [{ "name": "开始", "step_type": "start", "deal_type": "", "description": "", "posx": 228.25, "posy": 359, "timeout_hours": 168, "approver_users": [], "approver_orgs": [], "approver_user_field": "", "approver_org_field": "", "approver_roles": [], "approver_step": "", "lines": [{ "name": "", "state": "submitted", "to_step": "2ac5e4ae-b99b-4a82-96fa-735ef2699b06", "description": "", "timeout_line": false, "_id": "SMhqFczCQex9jjrEX" }], "permissions": { "出发日期": "editable", "到达日期": "editable", "出发地点": "editable", "到达地点": "editable", "交通工具": "editable", "__form": "editable", "流水号": "editable", "单据日期": "editable", "人员": "editable", "出差人": "editable", "所属部门": "editable", "所属公司": "editable", "单据状态": "editable", "出差事由": "editable", "付款方式": "editable", "币种": "editable", "报销金额": "editable", "收款金额": "editable", "发票类型": "editable", "票据数量": "editable", "附件数": "editable", "项目": "editable", "采管会": "editable", "签报": "editable", "总裁办公会": "editable", "交通费用明细": "editable", "交通费用明细-出发日期": "editable", "交通费用明细-到达日期": "editable", "交通费用明细-出发地点": "editable", "交通费用明细-到达地点": "editable", "交通费用明细-交通工具": "editable", "交通费用明细-是否有本人信息": "editable", "交通费用明细-报销金额": "editable", "交通费用明细-其中民航发展基金": "editable", "交通费用明细-税率": "editable", "交通费用明细-不含税金额": "editable", "交通费用明细-旅客运输增值税税额": "editable", "交通费用明细-票据数量": "editable", "交通费用明细-来源单号": "editable", "其他费用明细": "editable", "其他费用明细-报销项目": "editable", "其他费用明细-币种": "editable", "其他费用明细--汇率": "editable", "其他费用明细-报销金额": "editable", "其他费用明细-票据数量": "editable", "出差补贴明细": "editable", "出差补贴明细-天数": "editable", "出差补贴明细-补贴标准": "editable", "出差补贴明细-补贴总金额": "editable", "出差补贴明细-汇率": "editable", "增值税专用发票明细": "editable", "增值税专用发票明细-发票号": "editable", "增值税专用发票明细-不含税价": "editable", "增值税专用发票明细-税率": "editable", "增值税专用发票明细-税额": "editable", "增值税专用发票明细-价税合计": "editable", "增值税专用发票明细-发票说明": "editable", "部门费用分摊表": "editable", "部门费用分摊表-预算承担部门": "editable", "部门费用分摊表-项目名称": "editable", "部门费用分摊表-报销金额": "editable", "部门费用分摊表-增值税税额": "editable", "部门费用分摊表-预算扣减额": "editable", "借款冲账明细": "editable", "借款冲账明细-借款部门": "editable", "借款冲账明细-借款人": "editable", "借款冲账明细-费用类型": "editable", "借款冲账明细-借款冲账金额": "editable", "收款明细": "editable", "收款明细-收款人": "editable", "收款明细-银行账户切换": "editable", "收款明细-收款银行": "editable", "收款明细-收款账号": "editable", "收款明细-收款金额": "editable", "收款明细-附言": "editable", "收款明细-已付金额": "editable" }, "can_edit_main_attach": false, "can_edit_normal_attach": true, "_id": "a6nhyeLbTu3KZCKTc", "approver_roles_name": [], "approver_hr_roles_name": [] }, { "name": "结束", "step_type": "end", "deal_type": "", "description": "", "posx": 742.75, "posy": 359, "approver_users": [], "approver_orgs": [], "approver_user_field": "", "approver_org_field": "", "approver_roles": [], "approver_step": "", "permissions": {}, "_id": "NbWzGkcS2YbneEuHD", "approver_roles_name": [], "approver_hr_roles_name": [] }, { "name": "审批", "step_type": "sign", "deal_type": "pickupAtRuntime", "description": "", "posx": 444, "posy": 215, "timeout_hours": 168, "approver_users": [], "approver_orgs": [], "approver_user_field": "", "approver_org_field": "", "approver_roles": [], "approver_hr_roles": [], "approver_step": "", "lines": [{ "name": "", "state": "approved", "to_step": "NbWzGkcS2YbneEuHD", "description": "", "timeout_line": false }], "permissions": {}, "disableCC": false, "allowDistribute": false, "can_edit_main_attach": false, "can_edit_normal_attach": true, "cc_must_finished": false, "cc_alert": false, "allow_pick_approve_users": false, "allow_skip": false, "cc_has_edit_permission": false, "_id": "2ac5e4ae-b99b-4a82-96fa-735ef2699b06", "approver_roles_name": [], "approver_hr_roles_name": [] }], "_rev": 15, "flow": "CsePrmYFiNTHH9oim", "form_version": "QixDpXjhNqRzifKnp", "modified": "2021-10-21T09:50:12.088Z", "modified_by": "61653b92aa13851dafe36e1a", "start_date": "2021-10-21T09:50:12.088Z" }, "company_ids": ["ojtDauFfbyp88NHGi"], "historys": [], "events": "// 添加 引差旅审批按钮\n$(\".btn-workflow-chart\").parent().append('<button class=\"slds-button slds-button--neutral slds-truncate btn-workflow-selectTravelIns\"><span>引差旅审批</span></button>');\n$(\".btn-workflow-selectTravelIns\").on('click', function (e) {\n    $(\"body\").addClass(\"loading\");\n    SteedosUI.showModal(stores.ComponentRegistry.components.ObjectTable, {\n        title: `请选择单据`,\n        listSchema: {\n            columns: [\n                { field: \"流水号\" },\n                { field: \"核算公司\" },\n                { field: \"人员\" },\n                { field: \"公出地点\" },\n                { field: \"公出项目\" },\n                { field: \"员工工号\" },\n                { field: \"被授权人\" },\n            ],\n        },\n        objectSchema: {\n            fields: {\n                '流水号': { type: 'text', label: '流水号' },\n                '核算公司': { type: 'text', label: '核算公司' },\n                '人员': { type: 'text', label: '人员' },\n                '公出地点': { type: 'text', label: '公出地点' },\n                '公出项目': { type: 'text', label: '公出项目' },\n                '员工工号': { type: 'text', label: '员工工号' },\n                '被授权人': { type: 'text', label: '被授权人' },\n\n            }\n        },\n        rows: function () {\n            var rows = [];\n            try {\n                // TODO 通过调用第三方接口获取数据\n                rows = [\n                    { '流水号': '381030115', '核算公司': '股份有限公司', '人员': '李二', '公出地点': '上海', '公出项目': '参加有限公司...', '员工工号': '0102391', '被授权人': '' },\n                    { '流水号': '381030116', '核算公司': '股份有限公司', '人员': '李二', '公出地点': '上海', '公出项目': '参加有限公司...', '员工工号': '0102391', '被授权人': '' },\n                    { '流水号': '381030117', '核算公司': '股份有限公司', '人员': '李二', '公出地点': '上海', '公出项目': '参加有限公司...', '员工工号': '0102391', '被授权人': '' },\n                    { '流水号': '381030118', '核算公司': '股份有限公司', '人员': '李二', '公出地点': '上海', '公出项目': '参加有限公司...', '员工工号': '0102391', '被授权人': '' },\n                    { '流水号': '381030119', '核算公司': '股份有限公司', '人员': '李二', '公出地点': '上海', '公出项目': '参加有限公司...', '员工工号': '0102391', '被授权人': '' },\n                    { '流水号': '381030120', '核算公司': '股份有限公司', '人员': '李二', '公出地点': '上海', '公出项目': '参加有限公司...', '员工工号': '0102391', '被授权人': '' },\n                ]\n            } catch (error) {\n                toastr.error(error.message);\n            }\n            $(\"body\").removeClass(\"loading\")\n            return rows;\n        }(),\n        rowSelection: 'single',\n        rowKey: '流水号',\n        onFinish: async (selectedRowKeys, selectedRows) => {\n            if (selectedRowKeys.length < 1) {\n                throw new Error(`请选择单据`);\n            }\n            console.log('selectedRows: ', selectedRows);\n            var selectedRow = selectedRows[0];\n            $(\"input[name='流水号']\").val(selectedRow['流水号'])\n            $(\"input[name='人员']\").val(selectedRow['人员'])\n            return true;\n        }\n    })\n});\n\n// 交通费用明细添加 增加按钮\n$(\".tr-child-table .td-childfield-交通费用明细 .panel-heading .control-label\").append('<button class=\"slds-button slds-button--neutral slds-truncate btn-workflow-add-交通费用明细\"><span>增加</span></button>');\n$(\".btn-workflow-add-交通费用明细\").on('click', function (e) {\n    $(\"body\").addClass(\"loading\");\n    SteedosUI.showModal(stores.ComponentRegistry.components.ObjectTable, {\n        title: `请选择交通费用明细`,\n        listSchema: {\n            columns: [\n                { field: \"交通费用明细-出发日期\" },\n                { field: \"交通费用明细-到达日期\" },\n                { field: \"交通费用明细-出发地点\" },\n                { field: \"交通费用明细-到达地点\" },\n                { field: \"交通费用明细-交通工具\" },\n                { field: \"交通费用明细-是否有本人信息\" },\n                { field: \"交通费用明细-报销金额\" },\n                { field: \"交通费用明细-其中民航发展基金\" },\n                { field: \"交通费用明细-税率\" },\n                { field: \"交通费用明细-不含税金额\" },\n                { field: \"交通费用明细-旅客运输增值税税额\" },\n                { field: \"交通费用明细-票据数量\" },\n            ],\n        },\n        objectSchema: {\n            fields: {\n                '交通费用明细-出发日期': { type: 'date', label: '出发日期' },\n                '交通费用明细-到达日期': { type: 'date', label: '到达日期' },\n                '交通费用明细-出发地点': { type: 'text', label: '出发地点' },\n                '交通费用明细-到达地点': { type: 'text', label: '到达地点' },\n                '交通费用明细-交通工具': { type: 'text', label: '交通工具' },\n                '交通费用明细-是否有本人信息': { type: 'text', label: '是否有本人信息' },\n                '交通费用明细-报销金额': { type: 'text', label: '报销金额' },\n                '交通费用明细-其中民航发展基金': { type: 'text', label: '其中民航发展基金' },\n                '交通费用明细-税率': { type: 'text', label: '税率' },\n                '交通费用明细-不含税金额': { type: 'text', label: '不含税金额' },\n                '交通费用明细-旅客运输增值税税额': { type: 'text', label: '旅客运输增值税税额' },\n                '交通费用明细-票据数量': { type: 'text', label: '票据数量' },\n            }\n        },\n        rows: function () {\n            var rows = [];\n            try {\n                // TODO 通过调用第三方接口获取数据\n                rows = [\n                    { '交通费用明细-出发日期': '2021-10-21', '交通费用明细-到达日期': '2021-10-22', '交通费用明细-出发地点': '北京', '交通费用明细-到达地点': '上海', '交通费用明细-交通工具': '火车', '交通费用明细-是否有本人信息': '是', '交通费用明细-报销金额': '1000', '交通费用明细-其中民航发展基金': '', '交通费用明细-税率': '10', '交通费用明细-不含税金额': '900', '交通费用明细-旅客运输增值税税额': '900', '交通费用明细-票据数量': '1' },\n                    { '交通费用明细-出发日期': '2021-10-23', '交通费用明细-到达日期': '2021-10-24', '交通费用明细-出发地点': '北京', '交通费用明细-到达地点': '上海', '交通费用明细-交通工具': '火车', '交通费用明细-是否有本人信息': '是', '交通费用明细-报销金额': '1000', '交通费用明细-其中民航发展基金': '', '交通费用明细-税率': '10', '交通费用明细-不含税金额': '900', '交通费用明细-旅客运输增值税税额': '900', '交通费用明细-票据数量': '1' },\n                    { '交通费用明细-出发日期': '2021-10-25', '交通费用明细-到达日期': '2021-10-26', '交通费用明细-出发地点': '北京', '交通费用明细-到达地点': '上海', '交通费用明细-交通工具': '火车', '交通费用明细-是否有本人信息': '是', '交通费用明细-报销金额': '1000', '交通费用明细-其中民航发展基金': '', '交通费用明细-税率': '10', '交通费用明细-不含税金额': '900', '交通费用明细-旅客运输增值税税额': '900', '交通费用明细-票据数量': '1' },\n                    { '交通费用明细-出发日期': '2021-10-27', '交通费用明细-到达日期': '2021-10-28', '交通费用明细-出发地点': '北京', '交通费用明细-到达地点': '上海', '交通费用明细-交通工具': '火车', '交通费用明细-是否有本人信息': '是', '交通费用明细-报销金额': '1000', '交通费用明细-其中民航发展基金': '', '交通费用明细-税率': '10', '交通费用明细-不含税金额': '900', '交通费用明细-旅客运输增值税税额': '900', '交通费用明细-票据数量': '1' },\n                    { '交通费用明细-出发日期': '2021-10-29', '交通费用明细-到达日期': '2021-10-30', '交通费用明细-出发地点': '北京', '交通费用明细-到达地点': '上海', '交通费用明细-交通工具': '火车', '交通费用明细-是否有本人信息': '是', '交通费用明细-报销金额': '1000', '交通费用明细-其中民航发展基金': '', '交通费用明细-税率': '10', '交通费用明细-不含税金额': '900', '交通费用明细-旅客运输增值税税额': '900', '交通费用明细-票据数量': '1' },\n                ]\n            } catch (error) {\n                toastr.error(error.message);\n            }\n            $(\"body\").removeClass(\"loading\")\n            return rows;\n        }(),\n        rowSelection: 'multiple',\n        rowKey: '交通费用明细-出发日期',\n        onFinish: async (selectedRowKeys, selectedRows) => {\n            if (selectedRowKeys.length < 1) {\n                throw new Error(`请选择交通费用明细`);\n            }\n            console.log('selectedRows: ', selectedRows);\n            var formValues = AutoForm.getFormValues(\"instanceform\").insertDoc;\n            var field = '交通费用明细';\n            var items = formValues[field] || [];\n            items = items.concat(selectedRows);\n            var keys = SteedosTable.getKeys(field);\n            var validValue = SteedosTable.handleData(field, items);\n            SteedosTable.setTableValue(field, validValue);\n            $(\"tbody[name='\" + field + \"Tbody']\").html(SteedosTable.getTbody(keys, field, SteedosTable.getTableValue(field), true, true));\n            return true;\n        }\n    })\n});\n// 调整表格之间间隔\n$(\".tr-child-table .panel-heading\").css('padding', '26px 10px 6px 6px');", "object_workflows": [] }] }